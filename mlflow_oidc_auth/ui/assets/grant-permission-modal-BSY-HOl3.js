import{i as e,o as t,r as n,t as r}from"./button-DJ30HgDO.js";import{n as i}from"./use-toast-CTLGjzBn.js";import{t as a}from"./input-CjHmXOIG.js";var o=t(e(),1),s=t(n(),1);const c=({label:e,error:t,options:n,className:r=``,containerClassName:i=``,id:a,ref:o,reserveErrorSpace:c=!1,...l})=>{let u=t||(c?`\xA0`:null);return(0,s.jsxs)(`div`,{className:i,children:[e&&(0,s.jsxs)(`label`,{htmlFor:a,className:`block text-sm font-medium text-text-primary dark:text-text-primary-dark mb-1`,children:[e,l.required&&`*`]}),(0,s.jsx)(`select`,{ref:o,id:a,className:`w-full px-3 py-2 border rounded-md focus:outline-none
            text-ui-text dark:text-ui-text-dark
            bg-ui-bg dark:bg-ui-bg-dark
            border-ui-border dark:border-ui-border-dark
            focus:border-btn-primary dark:focus:border-btn-primary-dark
            transition duration-150 ease-in-out cursor-pointer
            disabled:opacity-70 disabled:cursor-not-allowed
            custom-select
            ${t?`border-red-500 focus:border-red-500 dark:border-red-500 dark:focus:border-red-500`:``}
            ${r}`,...l,children:n.map(e=>{let t=typeof e==`string`?e:e.label,n=typeof e==`string`?e:e.value;return(0,s.jsx)(`option`,{value:n,children:t},n)})}),u&&(0,s.jsx)(`p`,{className:`mt-1 text-sm ${t?`text-red-500`:`invisible`}`,children:u})]})};c.displayName=`Select`;var l=[`READ`,`EDIT`,`MANAGE`,`NO_PERMISSIONS`];const u=({value:e,onChange:t,id:n=`permission-level`,label:r=`Permissions*`,disabled:i=!1,required:a=!0,className:o,containerClassName:u})=>(0,s.jsx)(c,{id:n,label:r,value:e,onChange:e=>t(e.target.value),required:a,disabled:i,options:l.map(e=>({label:e,value:e})),className:o,containerClassName:u}),d=({isOpen:e,onClose:t,onSave:n,item:c,username:l,resourceId:d,type:f,isLoading:p=!1})=>{let[m,h]=(0,o.useState)(c?.permission||`READ`),[g,_]=(0,o.useState)(c&&`regex`in c?c.regex:``),[v,y]=(0,o.useState)(c&&`priority`in c?c.priority:0);if(!e||!c)return null;let b=async()=>{`regex`in c?await n(m,g,v):await n(m)},x=`regex`in c,S=`name`in c?c.name:c.regex,C=d||S;return(0,s.jsxs)(i,{isOpen:e,onClose:t,title:x?`Manage Regex Rule ${S}`:`Edit ${f.charAt(0).toUpperCase()+f.slice(1,-1)} ${C} permissions for ${l}`,children:[x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a,{id:`regex-pattern`,label:`Regex Pattern`,type:`text`,value:g,onChange:e=>_(e.target.value),className:`opacity-70 cursor-not-allowed`,required:!0,readOnly:!0,containerClassName:`mb-4`}),(0,s.jsx)(a,{id:`priority`,label:`Priority`,type:`number`,value:v,onChange:e=>y(parseInt(e.target.value,10)),required:!0,containerClassName:`mb-4`})]}),(0,s.jsx)(u,{id:`permission-level`,label:`Permission Level`,value:m,onChange:e=>h(e),containerClassName:`mb-4`}),(0,s.jsxs)(`div`,{className:`flex justify-end space-x-3`,children:[(0,s.jsx)(r,{onClick:t,variant:`ghost`,disabled:p,children:`Cancel`}),(0,s.jsx)(r,{onClick:()=>{b()},variant:`primary`,disabled:p,children:p?`Saving...`:`Ok`})]})]})},f=({isOpen:e,onClose:t,onSave:n,title:a,label:l,options:d,isLoading:f=!1})=>{let[p,m]=(0,o.useState)(``),[h,g]=(0,o.useState)(`READ`),_=async()=>{p&&await n(p,h)};return(0,s.jsxs)(i,{isOpen:e,onClose:t,title:a,children:[(0,s.jsx)(c,{id:`username-select`,label:l,value:p,onChange:e=>m(e.target.value),required:!0,options:[{label:`Select ${l.toLowerCase()}...`,value:``},...d].map(e=>typeof e==`string`?{label:e,value:e}:e),containerClassName:`mb-4`}),(0,s.jsx)(u,{id:`permission-level`,label:`Permissions`,value:h,onChange:e=>g(e),required:!0,containerClassName:`mb-4`}),(0,s.jsxs)(`div`,{className:`flex justify-end space-x-3`,children:[(0,s.jsx)(r,{onClick:t,variant:`ghost`,disabled:f,children:`Cancel`}),(0,s.jsx)(r,{onClick:()=>{_()},variant:`primary`,disabled:f||!p,children:f?`Saving...`:`Save`})]})]})};export{d as n,u as r,f as t};